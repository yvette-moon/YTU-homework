åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰å¸¸è§çš„ç±»å‹å¯ä»¥æ ¹æ®é—®é¢˜ç‰¹ç‚¹ã€çŠ¶æ€å®šä¹‰å’Œè½¬ç§»æ–¹å¼è¿›è¡Œåˆ†ç±»ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦çš„å‡ ç§ç±»å‹å’Œåˆ†ç±»æ–¹å¼ï¼š

---

### ä¸€ã€æŒ‰çŠ¶æ€ç»“æ„åˆ†ç±»

#### 1. **çº¿æ€§ DP**

* çŠ¶æ€é€šå¸¸æ˜¯ä¸€ç»´æˆ–äºŒç»´æ•°ç»„ï¼Œè¡¨ç¤ºå‰ i é¡¹æˆ–å‰ i å¤©çš„æœ€ä¼˜å€¼ã€‚
* **å¸¸è§é—®é¢˜**ï¼š

  * æœ€å¤§å­æ®µå’Œï¼ˆå¦‚ Kadane ç®—æ³•ï¼‰
  * æ•°å­—æ‹†åˆ†ã€èƒŒåŒ…é—®é¢˜
  * è·³å°é˜¶ã€æ–æ³¢é‚£å¥‘æ•°åˆ—
* **ä¾‹å­**ï¼š

  ```cpp
  dp[i] = max(dp[i-1] + a[i], a[i]);
  ```

#### 2. **åŒºé—´ DP**

* é€šå¸¸ç”¨äºåˆ’åˆ†åŒºé—´ã€åˆå¹¶åŒºé—´ç­‰é—®é¢˜ã€‚
* çŠ¶æ€å®šä¹‰ä¸ºå¤„ç†åŒºé—´ \[i, j] çš„æœ€ä¼˜è§£ã€‚
* **å¸¸è§é—®é¢˜**ï¼š

  * çŸ³å­åˆå¹¶ã€çŸ©é˜µè¿ä¹˜ã€æ‹¬å·åŒ¹é…
* **çŠ¶æ€è½¬ç§»**ï¼š

  ```cpp
  dp[i][j] = min(dp[i][k] + dp[k+1][j] + cost[i][j]);
  ```

#### 3. **æ ‘å½¢ DP**

* åŸºäºæ ‘çš„ç»“æ„æ¥å®šä¹‰çŠ¶æ€ï¼ŒçŠ¶æ€åœ¨æ ‘çš„å­èŠ‚ç‚¹ä¹‹é—´ä¼ é€’ã€‚
* é€šå¸¸ç”¨ DFS + è®°å¿†åŒ–å®Œæˆã€‚
* **å¸¸è§é—®é¢˜**ï¼š

  * æ ‘çš„ç›´å¾„ã€é€‰ç‚¹é—®é¢˜ï¼ˆå¦‚é€‰æ‘åº„å»ºç”µç«™ï¼‰
* **çŠ¶æ€å®šä¹‰**ï¼š

  * `dp[u][0]` è¡¨ç¤ºä¸é€‰ u å­æ ‘çš„æœ€ä¼˜è§£ï¼Œ`dp[u][1]` è¡¨ç¤ºé€‰ u å­æ ‘çš„æœ€ä¼˜è§£

#### 4. **çŠ¶å‹ DPï¼ˆçŠ¶æ€å‹ç¼©ï¼‰**

* ä½¿ç”¨ä¸€ä¸ªæ•´æ•°ï¼ˆäºŒè¿›åˆ¶ï¼‰è¡¨ç¤ºå¤šä¸ªçŠ¶æ€çš„ç»„åˆã€‚
* å¸¸ç”¨äºå­é›†æšä¸¾ã€æ’åˆ—ç»„åˆã€è·¯å¾„é—®é¢˜ç­‰ã€‚
* **å¸¸è§é—®é¢˜**ï¼š

  * TSPï¼ˆæ—…è¡Œå•†é—®é¢˜ï¼‰
  * é›†åˆè¦†ç›–é—®é¢˜
* **ä¾‹å­**ï¼š

  ```cpp
  dp[s][i] = min(dp[s][i], dp[s^(1<<i)][j] + dist[j][i]);
  ```

#### 5. **èƒŒåŒ… DP**

* æœ‰é™å®¹é‡ï¼Œé€‰æ‹©è‹¥å¹²ç‰©å“ä½¿ä»·å€¼æœ€å¤§ã€‚
* åˆ†ç±»ï¼š

  * 0-1 èƒŒåŒ…ï¼šæ¯ç§ç‰©å“åªèƒ½é€‰ä¸€æ¬¡
  * å®Œå…¨èƒŒåŒ…ï¼šæ¯ç§ç‰©å“å¯é€‰æ— é™æ¬¡
  * å¤šé‡èƒŒåŒ…ï¼šæ¯ç§ç‰©å“å¯é€‰æœ‰é™æ¬¡
* **ä¾‹å­**ï¼š

  ```cpp
  dp[j] = max(dp[j], dp[j-w[i]] + v[i]);
  ```

---

### äºŒã€æŒ‰ç»´åº¦åˆ†ç±»

#### 1. **ä¸€ç»´ DP**

* å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ã€çˆ¬æ¥¼æ¢¯ã€æœ€å¤§å­æ®µå’Œ

#### 2. **äºŒç»´ DP**

* å¦‚æœ€é•¿å…¬å…±å­åºåˆ—ã€èƒŒåŒ…é—®é¢˜ã€åŒºé—´åˆå¹¶

#### 3. **å¤šç»´ DP**

* å¦‚ä¸‰ç»´è¡¨ç¤ºï¼ˆé˜¶æ®µã€èµ„æºã€çŠ¶æ€ï¼‰ã€åšå¼ˆé—®é¢˜ã€å¤šå‚æ•°çº¦æŸ

---

### ä¸‰ã€æŒ‰çŠ¶æ€è½¬ç§»ç­–ç•¥åˆ†ç±»

#### 1. **é€’æ¨ DP**

* æ˜¾å¼åœ°ç”±å°é—®é¢˜æ¨åˆ°å¤§é—®é¢˜ï¼ˆè‡ªåº•å‘ä¸Šï¼‰
* ä»£ç ç»“æ„é€šå¸¸æ˜¯ for å¾ªç¯ + æ•°ç»„è®°å½•çŠ¶æ€

#### 2. **è®°å¿†åŒ–æœç´¢ï¼ˆé€’å½’ + è®°å¿†ï¼‰**

* è‡ªé¡¶å‘ä¸‹ï¼Œé‡åˆ°å­é—®é¢˜æ—¶å…ˆç®—å¹¶å­˜å‚¨
* é€šå¸¸å’Œ DFS ç»“åˆ

---

### å››ã€æŒ‰é—®é¢˜ç±»å‹åˆ†ç±»

| é—®é¢˜ç±»å‹ | ç¤ºä¾‹               |
| ---- | ---------------- |
| åºåˆ—å‹  | æœ€é•¿ä¸Šå‡å­åºåˆ—ã€æœ€å¤§å­æ•°ç»„å’Œ   |
| åŒºé—´å‹  | çŸ³å­åˆå¹¶ã€çŸ©é˜µè¿ä¹˜        |
| æ ‘å½¢ç»“æ„ | æ ‘å½¢ DPï¼Œæ ‘ä¸Šæœ€å¤§æƒè·¯å¾„ç­‰   |
| èƒŒåŒ…é—®é¢˜ | 0-1 èƒŒåŒ…ã€å®Œå…¨èƒŒåŒ…ã€å¤šé‡èƒŒåŒ… |
| åšå¼ˆå‹  | Nim æ¸¸æˆã€DP åˆ¤å®šå…ˆæ‰‹èƒœè´Ÿ |
| è®¡æ•°å‹  | æ•°å­—æ‹†åˆ†ã€è·¯å¾„æ–¹æ¡ˆæ•°       |
| çŠ¶æ€å‹ç¼© | TSPã€å­é›†è¦†ç›–         |

---

å¦‚æœä½ æœ‰å…´è¶£æ·±å…¥æŸä¸€ç±»ï¼ˆå¦‚çŠ¶æ€å‹ç¼©ã€åŒºé—´ DPã€æ ‘å½¢ DPï¼‰æˆ‘å¯ä»¥æä¾›å…¸å‹ä¾‹é¢˜ã€æ¨¡æ¿ä»£ç å’Œåˆ†æã€‚æ˜¯å¦æƒ³ç»§ç»­äº†è§£å…¶ä¸­å“ªä¸€ç±»ï¼Ÿ




## é¢˜ç›®æè¿°
å°è™æ˜¯æ¸¸æˆä¸­çš„ä¸€ä¸ªå›½ç‹ï¼Œåœ¨ä»–ç®¡ç†çš„å›½å®¶ä¸­å‘è¡Œäº†å¾ˆå¤šä¸åŒé¢é¢çš„çº¸å¸ï¼Œç”¨è¿™äº›çº¸å¸è¿›è¡Œä»»æ„çš„ç»„åˆå¯ä»¥åœ¨æ¸¸æˆä¸­è´­ä¹°å„ç§è£…å¤‡æ¥æå‡è‡ªå·±ã€‚æœ‰ä¸€å¤©ï¼Œä»–çªç„¶å¾ˆæƒ³çŸ¥é“è¿™äº›çº¸å¸çš„ç»„åˆä¸èƒ½è¡¨ç¤ºçš„æœ€å°é¢é¢æ˜¯å¤šå°‘ï¼Œè¯·èªæ˜çš„ä½ æ¥å¸®åŠ©å°è™æ¥è§£å†³è¿™ä¸ªè´¢æ”¿é—®é¢˜å§ã€‚

è¾“å…¥

è¾“å…¥åŒ…å«å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæ¯ç»„æµ‹è¯•ç”¨ä¾‹çš„ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•° $N$ $(N \le 100)$ è¡¨ç¤ºæµé€šçš„çº¸å¸é¢é¢æ•°é‡ï¼Œç¬¬äºŒè¡Œæ˜¯ $N$ ä¸ªçº¸å¸çš„å…·ä½“è¡¨ç¤ºé¢é¢ï¼Œå–å€¼ $[1, 100]$ã€‚

è¾“å‡º

å¯¹äºæ¯ç»„æµ‹è¯•ç”¨ä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå·²ç»å‘è¡Œçš„æ‰€æœ‰çº¸å¸éƒ½ä¸èƒ½è¡¨ç¤ºçš„æœ€å°é¢é¢ï¼ˆå·²ç»å‘è¡Œçš„æ¯ä¸ªçº¸å¸é¢é¢æœ€å¤šåªèƒ½ä½¿ç”¨ä¸€æ¬¡,ä½†é¢å€¼å¯èƒ½æœ‰é‡å¤ï¼‰ã€‚

é¦–å…ˆçš„æƒ³æ³•æ˜¯dfsç»„åˆå‡ºæ¯ç§æƒ…å†µå†æ‰¾æœ€å°çš„ä¸èƒ½è¡¨ç¤ºçš„ï¼Œä½†æ˜¯å¤æ‚åº¦å¤ªé«˜äº†å§ï¼Œ
ç»™å‡ºçš„é¢˜è¦æ±‚ç”¨åŠ¨æ€è§„åˆ’ï¼Œå…·ä½“çš„å®ç°æ–¹æ³•å°±æ˜¯

1.è®¾ç½®ä¸€ä¸ªä¸€ç»´bool dpæ•°ç»„ï¼Œdp[i]è¡¨ç¤ºæ˜¯å¦å¯ä»¥ç»„æˆié‡‘é¢ã€‚

2.åˆå§‹åŒ–dp[0]=true


3.ä¸€ä¸ªç”¨ä¸€æ¬¡ï¼Œä»åå‘å‰é€‰æ‹©

4.çŠ¶æ€è½¬ç§»ï¼šå¦‚æœdp[j]==true,åˆ™å¯ä»¥å åŠ ç›®æ ‡coinï¼Œå åŠ åçš„é‡‘é¢å†è®¾ä¸ºtrue

æœ€åæ‰¾åˆ°æœ€å°çš„flaseè¾“å‡ºå°±å¥½ã€‚

æ³¨æ„ï¼šè€ƒè™‘åˆ°éƒ½å¯ä»¥ç»„æˆçš„æƒ…å†µï¼Œæ‰€ä»¥æœ€åéå†çš„æ—¶å€™æœç´¢åˆ°sum+1

**å±äº0/1èƒŒåŒ…ï¼Œæ¯ä¸ªç›´é€‰ä¸€æ¬¡**
```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    int n;
    while (cin >> n && n != 0) {
        vector<int> coins(n);
        int sum = 0;
        for (int i = 0; i < n; i++) {
            cin >> coins[i];
            sum += coins[i];
        }

        vector<bool> dp(sum + 1, false);
        dp[0] = true;

        for (int i=0;i<n;i++) {
            int coin=coins[i];
            for (int j = sum - coin; j >= 0; j--) {
                if (dp[j])
                    dp[j + coin] = true;
            }
        }

        for (int i = 1; i <= sum+1; i++) {
            if (!dp[i]) {
                cout << i << endl;
                break;
            }
        }
    }
    return 0;
}
```
 ## é¢˜ç›®æè¿°
 
 Gustavo çŸ¥é“å¦‚ä½•è®¡æ•°ï¼Œä½†ä»–ç°åœ¨æ‰åˆšåˆšå­¦ä¹ å¦‚ä½•å†™æ•°å­—ã€‚ä»–å·²ç»å­¦ä¼šäº†æ•°å­—$1$,$2$,$3$å’Œ$4$.ä½†ä»–è¿˜æ²¡æœ‰æ„è¯†åˆ°$4$ä¸åŒäº$1$ï¼Œæ‰€ä»¥ä»–è®¤ä¸º$4$åªæ˜¯å¦ä¸€ç§å†™æ³•$1$.ä»–æ­£åœ¨ç©ä»–åˆ›é€ çš„ä¸€ä¸ªå°æ¸¸æˆï¼šä»–ç”¨ä»–çŸ¥é“çš„å››ä½æ•°å­—åˆ¶ä½œæ•°å­—ï¼Œå¹¶å¯¹å®ƒä»¬çš„å€¼æ±‚å’Œã€‚ä¾‹å¦‚ï¼š$$132 = 1 + 3 + 2 = 6$$ $$112314 = 1 + 1 + 2 + 3 + 1 + 1 = 9$$ï¼ˆè¯·è®°ä½ï¼Œå¤æ–¯å¡”æ²ƒæ˜¯è¿™ä¹ˆè®¤ä¸ºçš„$4 = 1$) Gustavo ç°åœ¨æƒ³çŸ¥é“ä»–å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªè¿™æ ·çš„æ•°å­—ï¼Œå…¶å’Œæ˜¯ä¸€ä¸ªæ•°å­—$n$.ä¸º$n = 2$ï¼Œä»–å¯ä»¥ä½¿$5$æ•°å­—ï¼š$11$,$14$,$41$,$44$å’Œ$2$.ï¼ˆä»–çŸ¥é“å¦‚ä½•æ•°å‡º 5 ä»¥ä¸Šï¼Œåªæ˜¯ä¸çŸ¥é“å¦‚ä½•å†™ã€‚ç„¶è€Œï¼Œä»–æ— æ³•è®¡ç®—å‡ºè¿™ç¬”é’±$n$å¤§äº$2$ï¼Œå¹¶å¯»æ±‚æ‚¨çš„å¸®åŠ©ã€‚      
 è¾“å…¥
 
 è¾“å…¥å°†ç”±ä»»æ„æ•°é‡çš„æ•´æ•°ç»„æˆ$n$ä½¿å¾—$1 \lt n \lt 1000$.æ‚¨å¿…é¡»é˜…è¯»ï¼Œç›´åˆ°åˆ°è¾¾æ–‡ä»¶æœ«å°¾ã€‚
 
 è¾“å‡º
 
 å¯¹äºæ¯ä¸ªè¯»å–çš„æ•´æ•°ï¼Œåœ¨ä¸€è¡Œä¸Šè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¯´æ˜ Gustavo å¯ä»¥ç”Ÿæˆå¤šå°‘ä¸ªæ•°å­—ï¼Œä»¥ä½¿å®ƒä»¬çš„æ•°å­—ä¹‹å’Œç­‰äº$n$.è€ƒè™‘åˆ°ç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œä½ åªéœ€è¦æŠŠç­”æ¡ˆ mod æ‰“å°å‡ºæ¥å°±1000000009äº†ã€‚
 **å®Œå…¨èƒŒåŒ…**
 ä¸ä¸Šä¸€é¢˜ç›¸ä¼¼çš„åœ°æ–¹æ˜¯ï¼Œéƒ½æ˜¯ç›¸åŠ å¾—ä¸€ä¸ªæ•°ã€‚

```cpp
#include <iostream>
#include <vector>
using namespace std;

const int MOD = 1000000009;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    
    // æœ€å¤§næ˜¯999
    const int MAX_N = 1000;
    vector<long long> dp(MAX_N + 1, 0);
    dp[0] = 1;

    // æ•°ä½è´¡çŒ®ï¼š1ï¼ˆåŒ…æ‹¬4ï¼‰ã€2ã€3
    vector<int> digits = {1, 2, 3};

    // å®Œå…¨èƒŒåŒ…æ„é€ dp
    for (int i = 1; i <= MAX_N; ++i) {
        for (int d : digits) {
            if (i >= d) {
                dp[i] = (dp[i] + dp[i - d]) % MOD;
            }
        }
    }

    // è¯»å–å¤šä¸ªè¾“å…¥ç›´åˆ°EOF
    int n;
    while (cin >> n) {
        cout << dp[n] << '\n';
    }

    return 0;
}

```
## é¢˜ç›®æè¿°
æœ‰ä¸€ä¸ªç”± $[1, 9]$ ç»„æˆçš„æ•°å­—ä¸²ï¼Œé—®å¦‚æœå°† $m$ ä¸ªåŠ å·æ’å…¥åˆ°è¿™ä¸ªæ•°å­—ä¸²ä¸­ï¼Œåœ¨å„ç§å¯èƒ½å½¢æˆçš„è¡¨è¾¾å¼ä¸­ï¼Œå€¼æœ€å°çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼æ˜¯å¤šå°‘ã€‚ä¾‹å¦‚ï¼Œåœ¨ $1234$ ä¸­æ‘†æ”¾ $1$ ä¸ªåŠ å·ï¼Œæœ€å¥½çš„æ‘†æ³•å°±æ˜¯ $12+34$ï¼Œå’Œä¸º $36$ã€‚

è¾“å…¥

æœ‰ä¸è¶…è¿‡ $15$ ç»„æ•°æ®ã€‚æ¯ç»„æ•°æ®ä¸¤è¡Œã€‚ç¬¬ä¸€è¡Œæ˜¯æ•´æ•° $m$ï¼Œè¡¨ç¤ºæœ‰ $m$ ä¸ªåŠ å·è¦æ”¾ $(0 \le m \le 17)$ã€‚ç¬¬äºŒè¡Œæ˜¯è‹¥å¹²ä¸ªæ•°å­—ã€‚æ•°å­—æ€»æ•° $n$ ä¸è¶…è¿‡ $18$ ä¸” $m \le n-1$ã€‚

è¾“å‡º

å¯¹æ¯ç»„æ•°æ®ï¼Œè¾“å‡ºæœ€å°åŠ æ³•è¡¨è¾¾å¼çš„å€¼ã€‚

**åŒºé—´DP / åˆ’åˆ†DP**
ğŸ§  è¿™ç±»é—®é¢˜çš„å…¸å‹ç‰¹ç‚¹ï¼š
æ±‚å­—ç¬¦ä¸²æˆ–åºåˆ—çš„åˆ’åˆ†æ–¹å¼ï¼Œæ»¡è¶³æŸä¸ªæœ€å°åŒ–/æœ€å¤§åŒ–ç›®æ ‡

çŠ¶æ€ä»¥åŒºé—´ç»ˆç‚¹å’Œåˆ’åˆ†æ®µæ•°æ¥å®šä¹‰

çŠ¶æ€è½¬ç§»é€šè¿‡æšä¸¾åˆ’åˆ†ç‚¹ k å®Œæˆ

1.dp[i][j]è¡¨ç¤ºå‰iä¸ªæ•°å­—å†…åŠ å…¥jä¸ªåŠ å·ä¹‹åå¾—åˆ°çš„æœ€å°å€¼ã€‚
2.åˆå§‹åŒ–ï¼šdp[i][0]=å‰iä¸ªæ•°å­—ï¼Œæœ€å¤§è®¾ç½®ä¸º1e9ã€‚
3.çŠ¶æ€è½¬ç§»ï¼šæœ¬èº«ï¼Œæˆ–è€…å‰j~i-1ä¸ªåŠ j-1ä¸ªåŠ å·å†åŠ å‰©ä¸‹çš„æ•°å­—çš„æƒ…å†µï¼Œæ‰€ä»¥è¦ä¸‰å±‚çš„forå¾ªç¯ã€‚
æ¯”å¦‚è¯´ 

2

123456

  |0     | 1                    | 2
  
0 |1e9   | 1e9                  |1e9

1 |1     | 1e9                  |

2 |12    | 3(1+2)               |

3 |123   | (1+23)/(12+3)/1e9    |

4 |1234

5 |12345

6 |123456

```cpp
#include <bits/stdc++.h>
using namespace std;
string a;
typedef long long ll;
ll sh(ll s,ll o){
    ll sum=0;
    for(ll k=s;k<=o;k++){
          sum=sum*10+(a[k]-'0');
    }
    return sum;
}
int main() {
    ll m;
    while(cin>>m){
    cin>>a;
    ll n=a.size();
    vector<vector<ll>> dp(n+1,vector<ll>(m+1,1e9));
    for(ll i=1;i<=n;i++){
        dp[i][0]=sh(0,i-1);
    }
    for(ll i=1;i<=n;i++){
        for(ll j=1;j<=m&&j<i;j++){
            for(ll k=j;k<i;k++)
            dp[i][j]=min(dp[i][j],dp[k][j-1]+sh(k,i-1));
        }
    }
    cout<<dp[n][m]<<endl;
}
    return 0;
}
```

åŒºé—´ DPï¼ˆInterval DPï¼‰ æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç§ï¼Œé€šå¸¸ç”¨äºè§£å†³ä¸ã€ŒåŒºé—´ã€ç›¸å…³çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

ç»™å®šä¸€ä¸ªåºåˆ—ï¼Œåœ¨æŸç§æ“ä½œè§„åˆ™ä¸‹åˆ†å‰²ã€åˆå¹¶ã€åˆ é™¤æˆ–æ’å…¥å­åºåˆ—ï¼Œæ±‚æœ€ä¼˜è§£ï¼ˆæœ€å°ä»£ä»·æˆ–æœ€å¤§æ”¶ç›Šï¼‰ï¼›

å­é—®é¢˜æ˜¯å­åŒºé—´çš„æœ€ä¼˜å€¼ï¼Œæ„é€ æ–¹æ³•æ˜¯å°†åŒºé—´ä¸€åˆ†ä¸ºäºŒã€‚

ğŸ§  é€‚ç”¨åœºæ™¯
åŒºé—´ DP å¸¸é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š

æ±‚ä¸€ä¸ªåŒºé—´å†…æŸç§æœ€ä¼˜å€¼ï¼ˆå¦‚ä»£ä»·æœ€å°ã€æ”¶ç›Šæœ€å¤§ï¼‰ï¼›

æœ‰åˆ†æ®µå†³ç­–æˆ–åˆå¹¶æ“ä½œï¼ˆå¦‚çŸ©é˜µé“¾ä¹˜ã€çŸ³å­åˆå¹¶ï¼‰ï¼›

çŠ¶æ€è½¬ç§»ä¾èµ–äºå­åŒºé—´ï¼Œå¦‚ dp[i][j] = min(dp[i][k] + dp[k+1][j] + cost)ã€‚

ğŸ§± çŠ¶æ€è®¾è®¡
dp[i][j]ï¼šè¡¨ç¤ºå¤„ç†åŒºé—´ [i, j] çš„æœ€ä¼˜å€¼ï¼›

æšä¸¾åˆ’åˆ†ç‚¹ kï¼Œå°è¯•å°† [i, j] åˆ†æˆ [i, k] å’Œ [k+1, j]ï¼›

çŠ¶æ€è½¬ç§»ä¸€èˆ¬ä¸ºï¼š

cpp
å¤åˆ¶ä»£ç 
for (int len = 2; len <= n; ++len) {
    for (int i = 1; i + len - 1 <= n; ++i) {
        int j = i + len - 1;
        dp[i][j] = INF;
        for (int k = i; k < j; ++k) {
            dp[i][j] = min(dp[i][j], dp[i][k] + dp[k+1][j] + cost(i, j));
        }
    }
}

## é—®é¢˜ D: åŠ¨æ€è§„åˆ’è¿›é˜¶é¢˜ç›®ä¹‹æ»‘é›ª

é¢˜ç›®æè¿°
      
 Michaelå–œæ¬¢æ»‘é›ªç™¾è¿™å¹¶ä¸å¥‡æ€ªï¼Œ å› ä¸ºæ»‘é›ªçš„ç¡®å¾ˆåˆºæ¿€ã€‚å¯æ˜¯ä¸ºäº†è·å¾—é€Ÿåº¦ï¼Œæ»‘çš„åŒºåŸŸå¿…é¡»å‘ä¸‹å€¾æ–œï¼Œè€Œä¸”å½“ä½ æ»‘åˆ°å¡åº•ï¼Œä½ ä¸å¾—ä¸å†æ¬¡èµ°ä¸Šå¡æˆ–è€…ç­‰å¾…å‡é™æœºæ¥è½½ä½ ã€‚Michaelæƒ³çŸ¥é“è½½ä¸€ä¸ªåŒºåŸŸä¸­æœ€é•¿çš„æ»‘å¡ã€‚åŒºåŸŸç”±ä¸€ä¸ªäºŒç»´æ•°ç»„ç»™å‡ºã€‚æ•°ç»„çš„æ¯ä¸ªæ•°å­—ä»£è¡¨ç‚¹çš„é«˜åº¦ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­$$\begin{matrix}1 & 2 & 3 & 4 & 5 \\16 & 17 & 18 & 19 & 6 \\15 & 24 & 25 & 20 & 7 \\14 & 23 & 22 & 21 & 8 \\13 & 12 & 11 & 10 & 9\\\end{matrix}$$ä¸€ä¸ªäººå¯ä»¥ä»æŸä¸ªç‚¹æ»‘å‘ä¸Šä¸‹å·¦å³ç›¸é‚»å››ä¸ªç‚¹ä¹‹ä¸€ï¼Œå½“ä¸”ä»…å½“é«˜åº¦å‡å°ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸€æ¡å¯æ»‘è¡Œçš„æ»‘å¡ä¸º $24-17-16-1$ã€‚ å½“ç„¶ $25-24-23- \dots -3-2-1$ æ›´é•¿ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯æœ€é•¿çš„ä¸€æ¡ã€‚      
 è¾“å…¥
        
 è¾“å…¥çš„ç¬¬ä¸€è¡Œè¡¨ç¤ºåŒºåŸŸçš„è¡Œæ•° $R$ å’Œåˆ—æ•° $C$ $(1 \le R, C \le 100)$ã€‚ä¸‹é¢æ˜¯ $R$ è¡Œï¼Œæ¯è¡Œæœ‰ $C$ ä¸ªæ•´æ•°ï¼Œä»£è¡¨é«˜åº¦ $h$ï¼Œ$0 \le h \le 10000$ã€‚ 
          
è¾“å‡º
        
 è¾“å‡ºæœ€é•¿åŒºåŸŸçš„é•¿åº¦ã€‚

å››ä¸ªæ–¹å‘æœç´¢ï¼Œå¾ˆéš¾ä¸æƒ³åˆ°bfs'å’Œdfså•Šï¼Œä½ è¦æ‰¾ã€Œä»æ¯ä¸ªç‚¹å‡ºå‘èƒ½æ»‘çš„æœ€é•¿è·¯å¾„ã€ï¼Œè¿™äº›è·¯å¾„å¯èƒ½äº’ç›¸é‡å ï¼Œæ‰€ä»¥ç›´æ¥ DFS ä¼šé‡å¤è®¡ç®—ã€‚
æ‰€ä»¥ç”¨dpæ¥è®°å¿†åŒ–
åŸºæœ¬è®¾è®¡æ€è·¯æ˜¯ï¼Œå¯¹æ¯ä¸ªç‚¹dfsæœç´¢ï¼Œæ¯æ¬¡åªéœ€è¦å åŠ è®°å½•è¿‡çš„dpå°±å¥½ã€‚æœ€åè¿”å›è¯¥ç‚¹çš„dpå€¼ã€‚ç”¨ansè®°å½•æœ€å¤§å€¼ã€‚

æ‹¿ä¾‹å­æ¥è¯´ï¼š

5 5

1 2 3 4 5

16 17 18 19 6

15 24 25 20 7

14 23 22 21 8

13 12 11 10 9

å¦‚16ï¼Œå‘ä¸‹ä¸€è·¯æœç´¢ï¼Œå¾—åˆ°æœ€é•¿çš„æ•°å€¼ä¸º16ï¼Œå†æœç´¢17ï¼Œå‘ç°å³ä¾§16å·²ç»æœ‰å€¼ï¼Œå¹¶ä¸”æ˜¯æœ€å¤§è·¯å¾„ï¼Œç›´æ¥ç›¸åŠ è®°å½•è¿”å›ã€‚

```cpp
#include <bits/stdc++.h>
using namespace std;
int r,c;
int dx[]={-1,1,0,0};
int dy[]={0,0,-1,1};
int slip[105][105];
vector<vector<int>> dp;
int dfs(int x,int y){
    if(dp[x][y]!=0)
    return dp[x][y];
    int maxlen=1;
    for(int i=0;i<4;i++){
        int nx=x+dx[i];
        int ny=y+dy[i];
        if(nx>=0&&nx<r&&ny>=0&&ny<c&&slip[nx][ny]<slip[x][y]){
            maxlen=max(maxlen,dfs(nx,ny)+1);
        }
    }
    dp[x][y]=maxlen;
    return dp[x][y];
}
int main(){
    cin>>r>>c;
    for(int i=0;i<r;i++){
        for(int j=0;j<r;j++){
            cin>>slip[i][j];
        }
    }
    dp=vector<vector<int>> (r,vector<int>(c,0));
    int ans=-1e9;
    for(int i=0;i<r;i++){
        for(int j=0;j<r;j++){
            ans=max(ans,dfs(i,j));
        }
    }
    cout<<ans<<endl;
    return 0;
}
```
## é—®é¢˜ E: æ±‚å­æ•°ç»„çš„æœ€å¤§å’Œï¼ˆåŠ¨æ€è§„åˆ’ï¼‰
é¢˜ç›®æè¿°
è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰æ­£æ•°ä¹Ÿæœ‰è´Ÿæ•°ã€‚æ•°ç»„ä¸­è¿ç»­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ï¼Œæ¯ä¸ªå­æ•°ç»„éƒ½æœ‰ä¸€ä¸ªå’Œã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚

è¾“å…¥
ä¸€ä¸ªæ•´å‹æ•°ç»„ã€‚

è¾“å‡º
å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚

âœ… åŠ¨æ€è§„åˆ’åˆ†ç±»ï¼šçº¿æ€§DPï¼ˆçº¿æ€§åºåˆ—DPï¼‰
å…·ä½“è¯´æ˜ï¼š
é—®é¢˜æ€§è´¨ï¼š
æ‰¾å‡ºæ•°ç»„ä¸­å’Œæœ€å¤§çš„è¿ç»­å­æ•°ç»„çš„å’Œã€‚

çŠ¶æ€å®šä¹‰ï¼š
dp[i] è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œã€‚

çŠ¶æ€è½¬ç§»ï¼š
dp[i] = max(dp[i-1] + nums[i], nums[i])
æ„å‘³ç€ï¼šè¦ä¹ˆæŠŠå½“å‰å…ƒç´ æ¥åˆ°ä¹‹å‰çš„å­æ•°ç»„åé¢ï¼Œè¦ä¹ˆä»å½“å‰å…ƒç´ é‡æ–°å¼€å§‹ã€‚

æœ€ç»ˆç­”æ¡ˆï¼š
æ•´ä¸ªæ•°ç»„æœ€å¤§å­æ•°ç»„å’Œå³ä¸º max(dp[i])

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    vector<int> nums(50005);
    int len = 1;
    while (cin >> nums[len]) {
        len++;
    }
    // dp[i] è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œ
    vector<int> dp(len + 1);
    int maxsum = nums[1]; // åˆå§‹åŒ–ä¸ºç¬¬ä¸€ä¸ªå…ƒç´ 
    dp[1] = nums[1];
    for (int i = 2; i <= len; ++i) {
        // dp[i] æ˜¯ dp[i-1] åŠ ä¸Šå½“å‰å…ƒç´  nums[i] æˆ–è€…å½“å‰å…ƒç´  nums[i] æœ¬èº«ï¼ˆå¦‚æœå‰é¢çš„å’Œä¸ºè´Ÿæ•°ï¼‰
        dp[i] = max(dp[i-1] + nums[i], nums[i]);
        // æ›´æ–°æœ€å¤§å­æ•°ç»„å’Œ
        maxsum = max(maxsum, dp[i]);
    }
    cout << maxsum << endl;
    return 0;
}
```

## é¢˜ç›®æè¿°
      
$N$ ä¸ªæ–¹ç›’æ‘†æˆä¸€æ’ï¼Œæ¯ä¸ªæ–¹ç›’æœ‰è‡ªå·±çš„é¢œè‰²ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚è¿ç»­æ‘†æ”¾çš„åŒé¢œè‰²æ–¹ç›’æ„æˆä¸€ä¸ªâ€œå¤§å—â€Â Â ç©å®¶æ¯æ¬¡ç‚¹å‡»ä¸€ä¸ªæ–¹ç›’ï¼Œåˆ™è¯¥æ–¹ç›’æ‰€åœ¨å¤§å—å°±ä¼šæ¶ˆå¤±ã€‚è‹¥æ¶ˆå¤±çš„å¤§å—ä¸­å…±æœ‰ $k$ ä¸ªæ–¹ç›’ï¼Œ, åˆ™ç©å®¶è·å¾— $k \times k$ ä¸ªç§¯åˆ†ã€‚è¯·é—®ï¼šç»™å®šæ¸¸æˆå¼€å§‹æ—¶çš„çŠ¶æ€ï¼Œç©å®¶å¯è·å¾—çš„æœ€é«˜ç§¯åˆ†æ˜¯å¤šå°‘? 

 è¾“å…¥
        
 ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $t$ $(1 \le t \le 15)$ï¼Œè¡¨ç¤ºå…±æœ‰å¤šå°‘ç»„æµ‹è¯•æ•°æ®ã€‚æ¯ç»„æµ‹è¯•æ•°æ®åˆåŒ…æ‹¬ä¸¤è¡Œ:é¦–å…ˆæ˜¯ä¸€ä¸ªæ•´æ•° $n$ $(1 \le n \le 200)$ï¼Œè¡¨ç¤ºå…±æœ‰å¤šå°‘ä¸ªæ–¹ç›’; å…¶æ¬¡åŒ…æ‹¬ $n$ ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªæ–¹ç›’çš„ é¢œè‰²ã€‚è¿™äº›æ•´æ•°çš„å–å€¼èŒƒå›´æ˜¯ $\left[1, n \right]$ã€‚
 
è¾“å‡º
        
å¯¹æ¯ç»„æµ‹è¯•æ•°æ®ï¼Œåˆ†åˆ«è¾“å‡ºè¯¥ç»„æµ‹è¯•æ•°æ®çš„åºå·ï¼Œä»¥åŠç©å®¶å¯ä»¥è·å¾—çš„æœ€é«˜ç§¯åˆ†ã€‚

          
ğŸ§© é¢˜ç›®ç®€åŒ–ç†è§£
ä½ æœ‰ä¸€æ’é¢œè‰²ç›’å­ï¼Œæ¯”å¦‚ï¼š

å¤åˆ¶ä»£ç 
1 2 2 2 3 3 1
ç›¸é‚»ç›¸åŒé¢œè‰²çš„ç›’å­ä¼šè¢«å½“æˆä¸€å—ï¼Œä¸€æ¬¡å¯ä»¥æŠŠè¿™ä¸€æ•´å—ç‚¹æ‰ã€‚

ç‚¹æ‰ä¸€ä¸ªå—ï¼Œå¾—åˆ†æ˜¯ï¼šk * kï¼ˆå…¶ä¸­ k æ˜¯å—ä¸­ç›’å­çš„æ•°é‡ï¼‰ã€‚

ä½ çš„ç›®æ ‡æ˜¯ï¼šé€‰æ‹©åˆ é™¤é¡ºåºï¼Œä½¿å¾—æœ€ç»ˆå¾—åˆ†æœ€å¤§ã€‚

ğŸ¯ æ ¸å¿ƒéš¾ç‚¹
æˆ‘ä»¬å¯ä»¥è‡ªç”±é€‰æ‹©åˆ é™¤é¡ºåºï¼Œæ‰€ä»¥ä¸èƒ½è´ªå¿ƒï¼
æ¯”å¦‚ä½ çœ‹åˆ°ä¸€å— 3 ä¸ªç›¸åŒé¢œè‰²çš„å—ï¼Œä¸èƒ½ç›´æ¥åˆ ï¼Œå› ä¸ºåé¢å¯èƒ½è¿˜æœ‰è¿™ä¸ªé¢œè‰²ï¼Œæˆ‘ä»¬åº”è¯¥â€œåˆå¹¶è¿œå¤„çš„ç›¸åŒé¢œè‰²â€å†ä¸€å—åˆ ï¼Œåˆ†æ•°æ›´é«˜ã€‚

ğŸ’¡ çŠ¶æ€è®¾è®¡ï¼ˆ3 ç»´ DPï¼‰
æˆ‘ä»¬ç”¨ dp[l][r][k] è¡¨ç¤ºï¼š

åœ¨åŒºé—´ [l, r] å†…ï¼Œå‡è®¾å³è¾¹æœ‰è¿ç»­ k ä¸ªå’Œ boxes[r] ä¸€æ ·é¢œè‰²çš„ç›’å­ï¼Œè·å¾—çš„æœ€å¤§åˆ†æ•°

ä¸ºä»€ä¹ˆè¦åŠ ç¬¬ä¸‰ç»´ kï¼Ÿä¸¾ä¸ªä¾‹å­è§£é‡Šï¼

ğŸ² ä¸¾ä¸ªå°ä¾‹å­ï¼š
å‡è®¾ä½ ç°åœ¨è€ƒè™‘åŒºé—´ï¼š

csharp
å¤åˆ¶ä»£ç 
[1 2 3 2 2]ï¼Œboxes[4] = 2
ä½†åœ¨åŸå§‹æ•°ç»„çš„å³è¾¹ï¼Œå…¶å®è¿˜æœ‰ä¸¤ä¸ª 2ï¼š

csharp
å¤åˆ¶ä»£ç 
[1 2 3 2 2 **2 2**]
æˆ‘ä»¬å¸Œæœ›æŠŠæœ€å³è¾¹è¿™ä¸¤ä¸ª 2 ä¸€èµ·åˆå¹¶èµ·æ¥å†åˆ é™¤ï¼Œè¿™æ ·æ‰“åˆ†æ›´é«˜ï¼Œæ¯”å¦‚åˆå¹¶åæ˜¯ 4 ä¸ª 2ï¼Œå¾—åˆ†å°±æ˜¯ 4 * 4 = 16ï¼Œæ¯” 2*2 + 2*2 = 8 é«˜å¾ˆå¤šï¼

æ‰€ä»¥æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼šå½“å‰åŒºé—´å³è¾¹è¿˜æœ‰å‡ ä¸ªä¸ boxes[r] ç›¸åŒçš„ç›’å­ï¼ˆè¿™ä¸ªæ•°é‡å°±æ˜¯ kï¼‰ï¼Œå¹¶å°†å…¶çº³å…¥å¾—åˆ†è®¡ç®—ã€‚

ğŸ§  çŠ¶æ€è½¬ç§»
å¯¹äº dp[l][r][k]ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š

âœ… æ–¹å¼ä¸€ï¼šç›´æ¥åˆ é™¤æœ€åä¸€æ®µï¼ˆr å’Œåé¢kä¸ªä¸€æ ·çš„ï¼‰
cpp
å¤åˆ¶ä»£ç 
dp[l][r][k] = dp[l][r - 1][0] + (k + 1) * (k + 1);
æ„æ€æ˜¯ï¼šå…ˆè®¡ç®— [l, r-1] çš„æœ€ä¼˜åˆ†ï¼Œç„¶ååˆ é™¤ r å’Œå®ƒå³è¾¹è¿ç»­çš„ k ä¸ªç›¸åŒé¢œè‰²ï¼Œå¾—åˆ†ä¸º (k+1)^2

âœ… æ–¹å¼äºŒï¼šå°è¯•åˆå¹¶å‰é¢çš„ç›¸åŒé¢œè‰²å—
æˆ‘ä»¬æšä¸¾ i æ»¡è¶³ l <= i < rï¼Œå¦‚æœ boxes[i] == boxes[r]ï¼š

cpp
å¤åˆ¶ä»£ç 
dp[l][r][k] = max(dp[l][r][k], dp[l][i][k+1] + dp[i+1][r-1][0]);
è¡¨ç¤ºæˆ‘ä»¬æŠŠ boxes[r] å’Œ boxes[i] åˆå¹¶ï¼Œå¤„ç†åŒºé—´ [i+1, r-1] å‰©ä¸‹çš„éƒ¨åˆ†ï¼Œç„¶åå†ç»Ÿä¸€æ¶ˆæ‰è¿™ä¸ªå¤§çš„å—ã€‚

è¿™ä¸ªåˆå¹¶æ˜¯è¿™é¢˜æœ€å…³é”®çš„ä¼˜åŒ–ã€‚

ğŸ§¾ åˆå§‹æ¡ä»¶
å¦‚æœåŒºé—´æ˜¯åªå«ä¸€ä¸ªå…ƒç´ ï¼š

cpp
å¤åˆ¶ä»£ç 
dp[l][r][k] = (k + 1)^2
æ¯”å¦‚ [3] å¹¶ä¸”æœ‰åé¢2ä¸ªç›¸åŒé¢œè‰²ï¼ˆk=2ï¼‰ï¼Œå¾—åˆ†æ˜¯ (2+1)^2 = 9

âœ… æ€»ç»“æ€è·¯
åŒºé—´åŠ¨æ€è§„åˆ’ï¼Œå¿…é¡»ä¸‰ç»´æ¥è¡¨è¾¾â€œå³è¾¹åˆå¹¶å—â€çš„ä¿¡æ¯

ä¸¤ç§å†³ç­–ï¼šç›´æ¥åˆ  or åˆå¹¶ååˆ 

é€’å½’ + è®°å¿†åŒ–æœç´¢é¿å…é‡å¤è®¡ç®—

æ—¶é—´å¤æ‚åº¦ O(nÂ³)ï¼Œä½†çŠ¶æ€æ•°ä¸è¶…è¿‡ 200Â³ å¯æ¥å—

ğŸ¤– æƒ³è±¡ä¸€æ¬¡é€’å½’è¿‡ç¨‹ï¼š
æ¯”å¦‚è¾“å…¥ï¼š

å¤åˆ¶ä»£ç 
1 2 2 2 3 3 3 1
æœ€ä¼˜æ–¹å¼æ˜¯ï¼š

å…ˆæŠŠä¸­é—´ 2 2 2 ä¸åŠ¨

æŠŠå‰åçš„ 1 åˆå¹¶æˆä¸€å— 1 1 åå†æ¶ˆæ‰

ç„¶åä¸€èµ·æ¶ˆæ‰ 2 2 2 å’Œ 3 3 3
          
```cpp
#include <iostream>
#include <vector>
#include <cstring>
#include <algorithm>
using namespace std;

int dp[201][201][201];
int boxes[201];

// è®°å¿†åŒ–æœç´¢å‡½æ•°
int dfs(int l, int r, int k) {
    if (l > r) return 0;
    if (dp[l][r][k] != -1) return dp[l][r][k];

    // å…ˆç›´æ¥æ¶ˆé™¤ r ä½ç½®å’Œå®ƒåé¢ k ä¸ªåŒé¢œè‰²çš„æ–¹å—
    int res = dfs(l, r - 1, 0) + (k + 1) * (k + 1);

    // å°è¯•å°† r åˆå¹¶åˆ°å‰é¢æŸä¸ªç›¸åŒé¢œè‰²çš„ box ä¸Š
    for (int i = l; i < r; ++i) {
        if (boxes[i] == boxes[r]) {
            res = max(res, dfs(l, i, k + 1) + dfs(i + 1, r - 1, 0));
        }
    }

    return dp[l][r][k] = res;
}

int main() {
    int t;
    cin >> t;
    for (int case_num = 1; case_num <= t; ++case_num) {
        int n;
        cin >> n;
        for (int i = 0; i < n; ++i) {
            cin >> boxes[i];
        }

        memset(dp, -1, sizeof(dp));  // é‡ç½®è®°å¿†åŒ–æ•°ç»„
        int result = dfs(0, n - 1, 0);

        cout << "Case " << case_num << ": " << result << endl;
    }
    return 0;
}
```
